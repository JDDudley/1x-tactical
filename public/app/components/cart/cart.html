<div class="container-fluid">
    <h1>{{$ctrl.name}}</h1>
    <p>Items in cart: ({{$ctrl.cart.length}})</p>
    <table class="table" ng-if="$ctrl.cart.length > 0">
        <thead>
            <tr>
                <th>Product</th>
                <th>Quantity</th>
                <th>MSRP</th>
                <th>Members</th>
                <th>Non-Members</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="product in $ctrl.cart">
                <td>{{product.name}}</td>
                <td>
                    <select ng-model="product.quantity" ng-options="o as o for o in [1,2,3,4,5,6,7,8,9,10]"></select>
                </td>
                <td>{{product.msrp * product.quantity | currency}}</td>
                <td>{{product.memberPrice * product.quantity | currency}}</td>
                <td>{{product.nonMemberPrice * product.quantity | currency}}</td>
                <td>
                    <button class="btn btn-xs btn-warning" ng-click="$ctrl.removeProductFromCart(product)">X</button>
                </td>
            </tr>
        </tbody>
        <tfoot>
            <tr>
                <td></td>
                <td class="text-right">Total</td>
                <td>{{$ctrl.calculateMsrp() | currency}}</td>
                <td>{{$ctrl.calculateMembers() | currency}}</td>
                <td>{{$ctrl.calculateNonMembers() | currency}}</td>
            </tr>
        </tfoot>
    </table>
</div>

<div class="container-fluid">
    <div class="row">
        <select ng-model="$ctrl.queryCat" style="color:black">
            <option value="" ng-selected>Select Category</option>
            <option value="Hand Guns" ng-selected>Hand Guns</option>
            <option value="Shot Guns" ng-selected>Shot Guns</option>
            <option value="Rifles" ng-selected>Rifles</option>
            <option value="Ammo" ng-selected>Ammo</option>
            <option value="Tactical Gear" ng-selected>Tactical Gear</option>
            <option value="Hunting" ng-selected>Hunting</option>
            <option value="Prepping" ng-selected>Prepping</option>
            <option value="Knives and Tools" ng-selected>Knives and Tools</option>
            <option value="Apparel" ng-selected>Apparel</option>
            <option value="Optics" ng-selected>Optics</option>
            <option value="Accessories" ng-selected>Accessories</option>
            <option value="Camping and Survival" ng-selected>Camping and Survival</option>
            <option value="Cases and Bags" ng-selected>Cases and Bags</option>
        </select>
        <input type="text" ng-model="$ctrl.query" style="color:black" placeholder="Product Name">
        <button class="btn-success" type="button">Search</button>
    </div>

    <div class="row">
        <div class="col-md-12">

            <div ng-repeat="product in $ctrl.products | filter: $ctrl.query | filter: $ctrl.queryCat" class="col-sm-4">
                <div class="shopping-product">
                    <div style="text-align:center">
                        <img ng-src="{{product.images[0]}}" style="width:200px ">
                    </div>
                    <h3 class="product-name">{{product.name}}</h3>
                    <p class="product-name">{{product.description}}</p>
                    <p class="product-price">MSRP: {{product.msrp | currency}}</p>
                    <p class="product-price">Members: {{product.memberPrice | currency}}</p>
                    <p class="product-price">Non-Members {{product.nonMemberPrice | currency}}</p>
                    <p class="product-price">Members Save: {{(product.msrp-product.memberPrice)/product.msrp*100 | number : 0}}%</p>
                    <button class="btn btn-xs btn-primary" ng-click="$ctrl.addProductToCart(product)">Add</button>
                </div>
            </div>
        </div>
    </div>
</div>
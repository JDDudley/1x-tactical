<div class="row full-height">
    <div class="col-xs-12">
        <h1>{{$ctrl.name}}</h1>
        <p>Items in cart: ({{$ctrl.cart.length}})</p>
        <table class="table" ng-if="$ctrl.cart.length>0">
            <thead>
                <tr>
                    <th>Product</th>
                    <th>Quantity</th>
                    <th>Members</th>
                    <th>Non-Members</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="product in $ctrl.cart">
                    <td>{{product.name}}</td>
                    <td>
                        <select ng-model="$ctrl.quantity" ng-options="o for o in $ctrl.options">
                        </select>
                    </td>
                    <td name="member-total">{{product.memberPrice * $ctrl.quantity ||product.price* $ctrl.quantity | currency}}</td>
                    <td name="non-member-total">{{product.nonMemberPrice * $ctrl.quantity ||product.price* $ctrl.quantity | currency}}<button class="btn btn-xs btn-warning pull-right"
                            ng-click="$ctrl.removeProductFromCart(product)">X</button></td>
                </tr>
            </tbody>
            <tfoot>
                <tr>
                    <td></td>
                    <td class="text-right">Total</td>
                    <!--<td>{{$ctrl.calculateMsrp() | currency}}</td>-->
                    <td>{{$ctrl.calculateMembers()| currency}}</td>
                    <td>{{$ctrl.calculateNonMembers() | currency}}</td>
                </tr>

                <script>
        $ctrl.calculateNonMembers()
    </script>
<!--FORM TO MAKE POST REQUEST TO STRIPE-->
<tr>
    <td>

        <form action="/charge" method="POST">
            <script src="https://checkout.stripe.com/checkout.js" class="stripe-button" data-key="pk_test_cUjpzeKJ4m81pgLcYEaix3zv" data-amount="{{$ctrl.calculateNonMembers() *100}}"
                data-name="1x Tactical" data-description="Arm Up Train Up Stand Up" data-image="https://stripe.com/img/documentation/checkout/marketplace.png"
                data-locale="auto" data-currency="usd" data-billing-address="true" data-shipping-address="true" data-allow-remember-me="true">
                </script>
<input type="hidden" name="chargeAmount" value="{{$ctrl.calculateNonMembers() *100}}">
</form>
</td>
</tr>

</tfoot>
</table>
</div>


<div class="col-xs-12 text-center" ng-if="!$ctrl.user.email">
    <h2>Please Sign In to Continue Checkout</h2>
</div>